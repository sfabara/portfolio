{"ast":null,"code":"var _jsxFileName = \"/var/www/portfolio/src/components/Tilted.js\";\nimport React, { useRef, useEffect } from 'react';\nimport { useSpring, animated, to } from '@react-spring/web';\nimport { useGesture } from 'react-use-gesture';\nimport Face from \"../img/self-portrait.jpg\";\nimport styles from './styles.module.css';\nconst url = \"https://images.unsplash.com/photo-1640195516482-aaab6c242863?ixlib=rb-1.2.1&ixid=MnwxMjA3fDB8MHxwaG90by1wYWdlfHx8fGVufDB8fHx8&auto=format&fit=crop&w=687&q=80\";\n\nconst calcX = (y, ly) => -(y - ly - window.innerHeight / 2) / 20;\n\nconst calcY = (x, lx) => (x - lx - window.innerWidth / 2) / 20;\n\nconst wheel = y => {\n  const imgHeight = window.innerWidth * 0.3 - 20;\n  return `translateY(${-imgHeight * (y < 0 ? 6 : 1) - y % (imgHeight * 5)}px`;\n};\n\nexport default function Tilted(image) {\n  useEffect(() => {\n    const preventDefault = e => e.preventDefault();\n\n    document.addEventListener('gesturestart', preventDefault);\n    document.addEventListener('gesturechange', preventDefault);\n    return () => {\n      document.removeEventListener('gesturestart', preventDefault);\n      document.removeEventListener('gesturechange', preventDefault);\n    };\n  }, []);\n  const domTarget = useRef(null);\n  const [{\n    x,\n    y,\n    rotateX,\n    rotateY,\n    rotateZ,\n    zoom,\n    scale\n  }, api] = useSpring(() => ({\n    rotateX: 0,\n    rotateY: 0,\n    rotateZ: 0,\n    scale: 1,\n    zoom: 0,\n    x: 0,\n    y: 0,\n    config: {\n      mass: 5,\n      tension: 500,\n      friction: 30\n    }\n  }));\n  const [{\n    wheelY\n  }, wheelApi] = useSpring(() => ({\n    wheelY: 0\n  }));\n  useGesture({\n    onMove: _ref => {\n      let {\n        xy: [px, py],\n        dragging\n      } = _ref;\n      return !dragging && api({\n        rotateX: calcX(py, y.get()),\n        rotateY: calcY(px, x.get()),\n        scale: 1.15\n      });\n    },\n    onHover: _ref2 => {\n      let {\n        hovering\n      } = _ref2;\n      return !hovering && api({\n        rotateX: 0,\n        rotateY: 0,\n        scale: 1\n      });\n    },\n    onWheel: _ref3 => {\n      let {\n        event,\n        offset: [, y]\n      } = _ref3;\n      event.preventDefault();\n      wheelApi.set({\n        wheelY: y\n      });\n    }\n  }, {\n    domTarget,\n    eventOptions: {\n      passive: false\n    }\n  });\n  return /*#__PURE__*/React.createElement(\"div\", {\n    className: styles.container,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 64,\n      columnNumber: 5\n    }\n  }, /*#__PURE__*/React.createElement(animated.div, {\n    ref: domTarget,\n    className: styles.card,\n    style: {\n      transform: 'perspective(600px)',\n      x,\n      y,\n      scale: to([scale, zoom], (s, z) => s + z),\n      rotateX,\n      rotateY,\n      rotateZ,\n      backgroundImage: \"url(https://i.ibb.co/j8s1Lfx/self-portrait.jpg)\"\n    },\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 65,\n      columnNumber: 7\n    }\n  }, /*#__PURE__*/React.createElement(animated.div, {\n    style: {\n      transform: wheelY.to(wheel)\n    },\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 80,\n      columnNumber: 9\n    }\n  })));\n}","map":{"version":3,"sources":["/var/www/portfolio/src/components/Tilted.js"],"names":["React","useRef","useEffect","useSpring","animated","to","useGesture","Face","styles","url","calcX","y","ly","window","innerHeight","calcY","x","lx","innerWidth","wheel","imgHeight","Tilted","image","preventDefault","e","document","addEventListener","removeEventListener","domTarget","rotateX","rotateY","rotateZ","zoom","scale","api","config","mass","tension","friction","wheelY","wheelApi","onMove","xy","px","py","dragging","get","onHover","hovering","onWheel","event","offset","set","eventOptions","passive","container","card","transform","s","z","backgroundImage"],"mappings":"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","sourcesContent":["import React, { useRef, useEffect } from 'react'\nimport { useSpring, animated, to } from '@react-spring/web'\nimport { useGesture } from 'react-use-gesture'\nimport Face from \"../img/self-portrait.jpg\"\nimport styles from './styles.module.css'\n\nconst url = \"https://images.unsplash.com/photo-1640195516482-aaab6c242863?ixlib=rb-1.2.1&ixid=MnwxMjA3fDB8MHxwaG90by1wYWdlfHx8fGVufDB8fHx8&auto=format&fit=crop&w=687&q=80\"\nconst calcX = (y, ly) => -(y - ly - window.innerHeight / 2) / 20\nconst calcY = (x, lx) => (x - lx - window.innerWidth / 2) / 20\n\nconst wheel = (y) => {\n  const imgHeight = window.innerWidth * 0.3 - 20\n  return `translateY(${-imgHeight * (y < 0 ? 6 : 1) - (y % (imgHeight * 5))}px`\n}\n\nexport default function Tilted(image) {\n  useEffect(() => {\n    const preventDefault = (e) => e.preventDefault()\n    document.addEventListener('gesturestart', preventDefault)\n    document.addEventListener('gesturechange', preventDefault)\n\n    return () => {\n      document.removeEventListener('gesturestart', preventDefault)\n      document.removeEventListener('gesturechange', preventDefault)\n    }\n  }, [])\n\n  const domTarget = useRef(null)\n  const [{ x, y, rotateX, rotateY, rotateZ, zoom, scale }, api] = useSpring(\n    () => ({\n      rotateX: 0,\n      rotateY: 0,\n      rotateZ: 0,\n      scale: 1,\n      zoom: 0,\n      x: 0,\n      y: 0,\n      config: { mass: 5, tension: 500, friction: 30 },\n    })\n  )\n\n  const [{ wheelY }, wheelApi] = useSpring(() => ({ wheelY: 0 }))\n\n  useGesture(\n    {\n\n      onMove: ({ xy: [px, py], dragging }) =>\n        !dragging &&\n        api({\n          rotateX: calcX(py, y.get()),\n          rotateY: calcY(px, x.get()),\n          scale: 1.15,\n        }),\n      onHover: ({ hovering }) =>\n        !hovering && api({ rotateX: 0, rotateY: 0, scale: 1 }),\n      onWheel: ({ event, offset: [, y] }) => {\n        event.preventDefault()\n        wheelApi.set({ wheelY: y })\n      },\n    },\n    { domTarget, eventOptions: { passive: false } }\n  )\n  return (\n    <div className={styles.container}>\n      <animated.div\n        ref={domTarget}\n        className={styles.card}\n        style={{\n          transform: 'perspective(600px)',\n          x,\n          y,\n          scale: to([scale, zoom], (s, z) => s + z),\n          rotateX,\n          rotateY,\n          rotateZ,\n          backgroundImage: \"url(https://i.ibb.co/j8s1Lfx/self-portrait.jpg)\"\n        }}\n       \n        >\n        <animated.div style={{ transform: wheelY.to(wheel) }}>\n            {/* <div key={1} style={{ backgroundImage: `url(${url})` }} /> */}\n            {/* <img src={Face} style={{zIndex: \"10000\", backgroundImage: `url(${Face})`}}/> */}\n        </animated.div>\n      </animated.div>\n    </div>\n  )\n}\n"]},"metadata":{},"sourceType":"module"}