{"ast":null,"code":"import _slicedToArray from\"/var/www/portfolio/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/slicedToArray\";import React,{useRef,useEffect}from'react';import{useSpring,animated,to}from'@react-spring/web';import{useGesture}from'react-use-gesture';import Face from\"../img/self-portrait.jpg\";import styles from'./styles.module.css';var calcX=function calcX(y,ly){return-(y-ly-window.innerHeight/2)/20;};var calcY=function calcY(x,lx){return(x-lx-window.innerWidth/2)/20;};var wheel=function wheel(y){var imgHeight=window.innerWidth*0.3-20;return\"translateY(\".concat(-imgHeight*(y<0?6:1)-y%(imgHeight*5),\"px\");};export default function Tilted(image){useEffect(function(){var preventDefault=function preventDefault(e){return e.preventDefault();};document.addEventListener('gesturestart',preventDefault);document.addEventListener('gesturechange',preventDefault);return function(){document.removeEventListener('gesturestart',preventDefault);document.removeEventListener('gesturechange',preventDefault);};},[]);var domTarget=useRef(null);var _useSpring=useSpring(function(){return{rotateX:0,rotateY:0,rotateZ:0,scale:1,zoom:0,x:0,y:0,config:{mass:5,tension:350,friction:40}};}),_useSpring2=_slicedToArray(_useSpring,2),_useSpring2$=_useSpring2[0],x=_useSpring2$.x,y=_useSpring2$.y,rotateX=_useSpring2$.rotateX,rotateY=_useSpring2$.rotateY,rotateZ=_useSpring2$.rotateZ,zoom=_useSpring2$.zoom,scale=_useSpring2$.scale,api=_useSpring2[1];var _useSpring3=useSpring(function(){return{wheelY:0};}),_useSpring4=_slicedToArray(_useSpring3,2),wheelY=_useSpring4[0].wheelY,wheelApi=_useSpring4[1];useGesture({onDrag:function onDrag(_ref){var active=_ref.active,_ref$offset=_slicedToArray(_ref.offset,2),x=_ref$offset[0],y=_ref$offset[1];return api({x:x,y:y,rotateX:0,rotateY:0,scale:active?1:1.1});},onPinch:function onPinch(_ref2){var _ref2$offset=_slicedToArray(_ref2.offset,2),d=_ref2$offset[0],a=_ref2$offset[1];return api({zoom:d/200,rotateZ:a});},onMove:function onMove(_ref3){var _ref3$xy=_slicedToArray(_ref3.xy,2),px=_ref3$xy[0],py=_ref3$xy[1],dragging=_ref3.dragging;return!dragging&&api({rotateX:calcX(py,y.get()),rotateY:calcY(px,x.get()),scale:1.1});},onHover:function onHover(_ref4){var hovering=_ref4.hovering;return!hovering&&api({rotateX:0,rotateY:0,scale:1});},onWheel:function onWheel(_ref5){var event=_ref5.event,_ref5$offset=_slicedToArray(_ref5.offset,2),y=_ref5$offset[1];event.preventDefault();wheelApi.set({wheelY:y});}},{domTarget:domTarget,eventOptions:{passive:false}});return/*#__PURE__*/React.createElement(\"div\",{className:styles.container},/*#__PURE__*/React.createElement(animated.div,{ref:domTarget,className:styles.card,style:{transform:'perspective(600px)',x:x,y:y,scale:to([scale,zoom],function(s,z){return s+z;}),rotateX:rotateX,rotateY:rotateY,rotateZ:rotateZ}},/*#__PURE__*/React.createElement(animated.div,{style:{transform:wheelY.to(wheel)}},/*#__PURE__*/React.createElement(\"img\",{src:Face,style:{zIndex:\"10000\",backgroundImage:\"url(\".concat(Face,\")\")}}))));}","map":{"version":3,"sources":["/var/www/portfolio/src/components/Tilted.js"],"names":["React","useRef","useEffect","useSpring","animated","to","useGesture","Face","styles","calcX","y","ly","window","innerHeight","calcY","x","lx","innerWidth","wheel","imgHeight","Tilted","image","preventDefault","e","document","addEventListener","removeEventListener","domTarget","rotateX","rotateY","rotateZ","scale","zoom","config","mass","tension","friction","api","wheelY","wheelApi","onDrag","active","offset","onPinch","d","a","onMove","xy","px","py","dragging","get","onHover","hovering","onWheel","event","set","eventOptions","passive","container","card","transform","s","z","zIndex","backgroundImage"],"mappings":"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","sourcesContent":["import React, { useRef, useEffect } from 'react'\nimport { useSpring, animated, to } from '@react-spring/web'\nimport { useGesture } from 'react-use-gesture'\nimport Face from \"../img/self-portrait.jpg\"\nimport styles from './styles.module.css'\n\nconst calcX = (y, ly) => -(y - ly - window.innerHeight / 2) / 20\nconst calcY = (x, lx) => (x - lx - window.innerWidth / 2) / 20\n\nconst wheel = (y) => {\n  const imgHeight = window.innerWidth * 0.3 - 20\n  return `translateY(${-imgHeight * (y < 0 ? 6 : 1) - (y % (imgHeight * 5))}px`\n}\n\nexport default function Tilted(image) {\n  useEffect(() => {\n    const preventDefault = (e) => e.preventDefault()\n    document.addEventListener('gesturestart', preventDefault)\n    document.addEventListener('gesturechange', preventDefault)\n\n    return () => {\n      document.removeEventListener('gesturestart', preventDefault)\n      document.removeEventListener('gesturechange', preventDefault)\n    }\n  }, [])\n\n  const domTarget = useRef(null)\n  const [{ x, y, rotateX, rotateY, rotateZ, zoom, scale }, api] = useSpring(\n    () => ({\n      rotateX: 0,\n      rotateY: 0,\n      rotateZ: 0,\n      scale: 1,\n      zoom: 0,\n      x: 0,\n      y: 0,\n      config: { mass: 5, tension: 350, friction: 40 },\n    })\n  )\n\n  const [{ wheelY }, wheelApi] = useSpring(() => ({ wheelY: 0 }))\n\n  useGesture(\n    {\n      onDrag: ({ active, offset: [x, y] }) =>\n        api({ x, y, rotateX: 0, rotateY: 0, scale: active ? 1 : 1.1 }),\n      onPinch: ({ offset: [d, a] }) => api({ zoom: d / 200, rotateZ: a }),\n      onMove: ({ xy: [px, py], dragging }) =>\n        !dragging &&\n        api({\n          rotateX: calcX(py, y.get()),\n          rotateY: calcY(px, x.get()),\n          scale: 1.1,\n        }),\n      onHover: ({ hovering }) =>\n        !hovering && api({ rotateX: 0, rotateY: 0, scale: 1 }),\n      onWheel: ({ event, offset: [, y] }) => {\n        event.preventDefault()\n        wheelApi.set({ wheelY: y })\n      },\n    },\n    { domTarget, eventOptions: { passive: false } }\n  )\n  return (\n    <div className={styles.container}>\n      <animated.div\n        ref={domTarget}\n        className={styles.card}\n        style={{\n          transform: 'perspective(600px)',\n          x,\n          y,\n          scale: to([scale, zoom], (s, z) => s + z),\n          rotateX,\n          rotateY,\n          rotateZ,\n        }}\n       \n        >\n        <animated.div style={{ transform: wheelY.to(wheel) }}>\n            {/* <div style={{ backgroundImage: `url(${Face})` }} /> */}\n            <img src={Face} style={{zIndex: \"10000\", backgroundImage: `url(${Face})`}}/>\n        </animated.div>\n      </animated.div>\n    </div>\n  )\n}\n"]},"metadata":{},"sourceType":"module"}